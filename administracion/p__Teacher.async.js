(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{F6mj:function(e,a,t){e.exports={actions:"sn-pages-teacher-index-actions",tableListForm:"sn-pages-teacher-index-tableListForm",tableListOperator:"sn-pages-teacher-index-tableListOperator"}},Odhe:function(e,a,t){"use strict";t.r(a);t("IzEo");var n=t("bx4M"),l=(t("qVdP"),t("jsC+")),r=(t("Pwec"),t("CtXQ")),o=(t("lUTK"),t("BvKs")),c=(t("2qtc"),t("kLXV")),i=(t("/zsF"),t("PArb")),s=(t("5Dmo"),t("3S7+")),d=(t("+L6B"),t("2/Rp")),u=t("p0pE"),p=t.n(u),m=t("2Taf"),h=t.n(m),f=t("vZ4D"),E=t.n(f),y=t("l4Ni"),v=t.n(y),g=t("ujKo"),b=t.n(g),x=t("MhPg"),C=t.n(x),k=(t("5NDa"),t("5rEg")),w=t("q1tI"),S=t.n(w),M=t("MuoO"),N=t("zHco"),I=(t("17x9"),t("CkN6")),_=t("F6mj"),T=t.n(_),O=t("jcMW"),U=(t("fOrg"),t("+KLJ")),j=(t("DZo9"),t("8z0m")),A=j["a"].Dragger,D=function(e){function a(e){var t;return h()(this,a),t=v()(this,b()(a).call(this,e)),t.state={file:null},t}return C()(a,e),E()(a,[{key:"render",value:function(){var e=this,a=this.props,t=a.teacher,n=a.dispatch,l=a.loading,o=t.modalUploadVisible,s=function(){n({type:"teacher/toggleModalUpload",payload:!1}),e.setState({file:null})},u={name:"filestidents",uploading:l,accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",showUploadList:!1,beforeUpload:function(a){return e.setState({file:a}),!1}},p=function(){n({type:"teacher/uploadteachers",payload:{file:e.state.file}})},m=function(){n({type:"teacher/downloadTemp"})},h=function(){e.setState({file:null})};return S.a.createElement("div",null,S.a.createElement(c["a"],{title:"Importar Profesores",visible:o,footer:null,onCancel:s},S.a.createElement("p",null,"Importa la informaci\xf3n de los profesores desde un archivo xlsx(Excel). El archivo xlsx se puede formatear con: dni, apellidos, nombres, fecha_nacimiento y otros campos opcionales."),S.a.createElement("p",null,S.a.createElement("a",{onClick:function(){return m()}},S.a.createElement(r["a"],{type:"layout"})," Descarga la plantilla"),"y abre en Excel para ver el formato con todos los campos aceptados."),this.state.file?S.a.createElement("div",null,S.a.createElement(U["a"],{message:this.state.file.name,type:"info",closable:!0,onClose:function(){return h()}}),S.a.createElement(i["a"],{dashed:!0}),S.a.createElement(d["a"],{type:"primary",loading:l,icon:"upload",onClick:function(){return p()}},"Subir archivo")):S.a.createElement(A,u,S.a.createElement("p",{className:"ant-upload-drag-icon"},S.a.createElement(r["a"],{type:"inbox"})),S.a.createElement("p",{className:"ant-upload-text"},"Haga clic o arrastre el archivo a esta \xe1rea para cargar"),S.a.createElement("p",{className:"ant-upload-hint"},"Soporte para subir un solo archivo "))))}}]),a}(S.a.Component),L=function(e){var a=e.teacher,t=(e.global,e.loading);return{teacher:a,loading:t.effects["teacher/uploadteachers"]}},R=Object(M["connect"])(L)(D),F=(t("14J3"),t("BMrR")),P=(t("jCWc"),t("kPKH")),K=t("iQbp"),Q=t.n(K),V=function(e){function a(e){return h()(this,a),v()(this,b()(a).call(this,e))}return C()(a,e),E()(a,[{key:"render",value:function(){var e=this.props,a=e.teacher,t=e.dispatch,n=(e.loading,a.modalExportVisible),l=function(){t({type:"teacher/toggleModalExport",payload:!1})},r=function(){t({type:"teacher/exportAllTeachers"})};return S.a.createElement("div",null,S.a.createElement(c["a"],{title:"Exportar profesores",visible:n,footer:null,onCancel:l},S.a.createElement(F["a"],{type:"flex",justify:"space-around"},S.a.createElement(P["a"],null,S.a.createElement(Q.a,{filename:"currentTeachers.xlsx",element:S.a.createElement(d["a"],{icon:"export"},"Exportar datos actuales")},S.a.createElement(Q.a.Sheet,{data:a.data.list,name:"Sheet1"},S.a.createElement(Q.a.Column,{label:"dni",value:"dni"}),S.a.createElement(Q.a.Column,{label:"Nombres",value:"first_name"}),S.a.createElement(Q.a.Column,{label:"Apellidos",value:"last_name"}),S.a.createElement(Q.a.Column,{label:"Fecha nacimiento",value:"birth_date"}),S.a.createElement(Q.a.Column,{label:"Genero",value:"gender"}),S.a.createElement(Q.a.Column,{label:"Direccion",value:"address"}),S.a.createElement(Q.a.Column,{label:"Telefono",value:"phone"}),S.a.createElement(Q.a.Column,{label:"Condicion laboral",value:"work_conditions"}),S.a.createElement(Q.a.Column,{label:"Nivel de educacion",value:"education_level"}),S.a.createElement(Q.a.Column,{label:"Fecha de ingreso",value:"admission_date"}),S.a.createElement(Q.a.Column,{label:"Fecha de retiro",value:"retirement_date"}),S.a.createElement(Q.a.Column,{label:"Especialidad",value:"specialty"})))),S.a.createElement(P["a"],null,S.a.createElement(d["a"],{type:"primary",icon:"export",onClick:function(){return r()}},"Exportar Todo")))))}}]),a}(S.a.Component),z=function(e){var a=e.teacher,t=e.loading;return{teacher:a,loading:t.effects["teacher/uploadteachers"]}},B=Object(M["connect"])(z)(V),H=t("3HEy"),J=k["a"].Search,q=function(e){function a(){var e,t;h()(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return t=v()(this,(e=b()(a)).call.apply(e,[this].concat(l))),t.state={selectedRows:[],search:""},t.onQueryAll=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.props.dispatch,n=p()({},e,{limit:e.limit});a({type:"teacher/all",payload:n})},t.onShowModalUser=function(e){var a=t.props.dispatch;a({type:"user/updateUserByID",payload:{id:e.user_id}})},t.onShowModal=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.props.dispatch;n({type:"teacher/showModal",payload:{currentItem:a,modalType:e}})},t.onShowModalExport=function(){var e=t.props.dispatch;e({type:"teacher/toggleModalExport",payload:!0})},t.onShowModalUpload=function(){var e=t.props.dispatch;e({type:"teacher/toggleModalUpload",payload:!0})},t.handleSelectRows=function(e){t.setState({selectedRows:e})},t.handleSearch=function(e){t.setState({search:e.target.value}),t.onQueryAll({search:e.target.value})},t.handleStandardTableChange=function(e,a,n){var l=t.state.formValues,r=Object.keys(a).reduce(function(e,t){var n=p()({},e);return n[t]=getValue(a[t]),n},{}),o=p()({current_page:e.current,limit:e.pageSize,search:t.state.search},l,r);n.field&&(o.sorter="".concat(n.field,"_").concat(n.order)),t.onQueryAll(o)},t.handleMenuClick=function(e){t.props.dispatch;var a=t.state.selectedRows;if(a)switch(e.key){case"remove":console.log(a.map(function(e){return e.id}));break;default:break}},t}return C()(a,e),E()(a,[{key:"componentDidMount",value:function(){this.onQueryAll()}},{key:"render",value:function(){var e=this,a=this.props,t=a.teacher,u=a.loading,p=t.data,m=this.state.selectedRows,h=function(a){var t=e.props.dispatch;t({type:"teacher/delete",payload:a})},f=[{title:"DNI",dataIndex:"dni",key:"dni"},{title:"Apellidos",dataIndex:"last_name",key:"last_name"},{title:"Nombres",dataIndex:"first_name",key:"first_name"},{title:"Direcci\xf2n",dataIndex:"address",key:"address"},{title:"Telefono",dataIndex:"phone",key:"phone"},{title:"Especialidad",dataIndex:"specialty",key:"specialty"},{title:"Accion",key:"accion",width:"150px",render:function(a,t){return S.a.createElement("div",{className:T.a.actions},S.a.createElement(s["a"],{title:"Usuario"},S.a.createElement(d["a"],{shape:"circle",icon:"user",onClick:function(){return e.onShowModalUser(t)}})),S.a.createElement(i["a"],{type:"vertical"}),S.a.createElement(s["a"],{title:"Editar"},S.a.createElement(d["a"],{shape:"circle",type:"primary",icon:"edit",onClick:function(){return e.onShowModal("update",t)}})),S.a.createElement(i["a"],{type:"vertical"}),S.a.createElement(s["a"],{title:"Eliminar"},S.a.createElement(d["a"],{shape:"circle",type:"danger",icon:"delete",onClick:function(){c["a"].confirm({title:"\xbfEst\xe1s seguro de eliminar este registro?",content:"Profesor: ".concat(t.first_name),okText:"SI",okType:"danger",cancelText:"NO",onOk:function(){h({id:t.id})}})}})))}}],E=S.a.createElement(o["a"],{onClick:this.handleMenuClick,selectedKeys:[]},S.a.createElement(o["a"].Item,{key:"none"},"Ninguna"));return S.a.createElement(N["a"],{title:"Profesores"},S.a.createElement(n["a"],{bordered:!1},S.a.createElement("div",{className:T.a.tableList},S.a.createElement("div",{className:T.a.tableListForm},S.a.createElement(J,{placeholder:"Buscar profesor",value:this.state.search,onChange:this.handleSearch})),S.a.createElement("div",{className:T.a.tableListOperator},S.a.createElement(d["a"].Group,null,S.a.createElement(d["a"],{icon:"plus",type:"primary",onClick:function(){return e.onShowModal("create")}},"Nuevo"),S.a.createElement(d["a"],{icon:"reload",onClick:function(){return e.onQueryAll()}},"Refrescar")),S.a.createElement(d["a"].Group,null,S.a.createElement(d["a"],{icon:"upload",onClick:function(){return e.onShowModalUpload()}},"Importar"),S.a.createElement(d["a"],{icon:"export",onClick:function(){return e.onShowModalExport()}},"Exportar")),m.length>0&&S.a.createElement("span",null,S.a.createElement(l["a"],{overlay:E},S.a.createElement(d["a"],null,"Mas operaciones ",S.a.createElement(r["a"],{type:"down"}))))),S.a.createElement(O["a"],null),S.a.createElement(R,null),S.a.createElement(B,null),S.a.createElement(I["a"],{selectedRows:m,loading:u,data:p,columns:f,rowKey:function(e){return e.id},onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange}),S.a.createElement(H["a"],null))))}}]),a}(w["Component"]),G=function(e){var a=e.teacher,t=e.loading;return{teacher:a,loading:t.effects["teacher/all"]}};a["default"]=Object(M["connect"])(G)(q)}}]);